<properties 
   pageTitle="Connect Azure Storage" 
   description="Azure Storage enables you to collect diagnostic telemetry data from a worker role, web role, or virtual machine running in Azure." 
   documentationCenter="dev-center-name" 
   authors="Jim-Parker" 
   manager="jwhit" 
   editor=""/>

<tags
   ms.service="Operational-Insights"
   ms.devlang="may be required"
   ms.topic="article"
   ms.tgt_pltfrm="may be required"
   ms.workload="Operational-Insights" 
   ms.date="02/20/2015"
   ms.author="jimpark"/>

# Connect Azure Storage 

Operational Insights can analyze data written by Azure Diagnostics to Azure storage. There are 2 main steps to perform:

1. Configure the collection of diagnostic data to Azure storage

2. Configure Operational Insights to analyze data in the storage account.

The topics below describe how to enable collection of diagnostics data to Azure storage and then how to configure Operational Insights to analyze the data in Azure storage.

Azure Diagnostics is an Azure extension that enables you to collect diagnostic telemetry data from a worker role, web role, or virtual machine running in Azure. The telemetry data is stored in an Azure storage account and can then be used by Operational Insights.

>[AZURE.NOTE] You'll be charged normal data rates for storage and transactions when you send diagnostics to a storage account.

Azure Diagnostics can collect the following types of telemetry:

| Data Source | Description |
| ------------- | -------------- |
| IIS Logs | Information about IIS web sites. |
| Azure Diagnostic infrastructure logs | Information about Diagnostics itself. |
| IIS Failed Request logs | Information about failed requests to an IIS site or application. |
| Windows Event logs | Information sent to the Windows event logging system. |
| Performance counters | Operating System and custom performance counters. |
| Crash dumps | Information about the state of the process in the event of an application crash. |
| Custom error logs | Logs created by your application or service. |
| .NET EventSource | Events generated by your code using the .NET [EventSource class](https://msdn.microsoft.com/en-us/library/system.diagnostics.tracing.eventsource(v=vs.110).aspx). |
| Manifest based ETW | ETW events generated by any process. |



Currently, Operational Insights is able to analyze IIS logs from Web roles and Windows Event logs from Web and Worker roles and Azure virtual machines. The logs must be in the following locations:


 - **WADWindowsEventLogsTable** (Table Storage)– Contains information from Windows Event logs.
 - **wad-iis-logfiles** (Blob Storage) – Contains information about IIS logs.

For virtual machines, you also have the option of installing the Microsoft Monitoring Agent into your virtual machine. This will let you analyze IIS logs, Event Logs and will also allow you to perform additional analysis including configuration change tracking, and update assessment. Enable additional insights by installing the [Microsoft Monitoring Agent](https://msdn.microsoft.com/library/azure/dn884659.aspx).

>[AZURE.NOTE] IIS logs from Azure Websites are not currently supported.

You can help us prioritize additional logs for Operational Insights to analyze by voting on our [feedback page](http://feedback.azure.com/forums/267889-azure-operational-insights/category/88086-log-management-and-log-collection-policy).

The following articles contain information about analyzing logs that are collected by Azure diagnostics.


## Topics about analyzing logs collected with Azure Diagnostics

[How to enable diagnostics in a Web role for IIS log and event collection](https://msdn.microsoft.com/en-us/library/azure/dn904277.aspx)

[How to enable diagnostics in a virtual machine for event log and IIS log collection](https://msdn.microsoft.com/en-us/library/azure/dn904280.aspx)

[How to enable analysis by Operational Insights](https://msdn.microsoft.com/en-us/library/azure/dn904279.aspx)


<!--Every topic should have next steps and links to the next logical set of content to keep the customer engaged-->
